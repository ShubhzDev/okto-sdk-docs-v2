---
title: 'Integrating with wagmi'
full: false
---

import { Step, Steps } from "fumadocs-ui/components/steps";

[Wagmi](https://wagmi.sh/) is a collection of React hooks for Ethereum, making it easy to interact with wallets and smart contracts. Okto provides seamless integration with Wagmi through its adapter package, allowing you to leverage Wagmi's capabilities while maintaining Okto's wallet management features.

<Steps>

<Step>

## Installation

Install the Okto wagmi adapter [package](https://www.npmjs.com/package/@okto_web3/wagmi-adapter) and other dependencies:

```bash
npm i @okto_web3/wagmi-adapter wagmi @tanstack/react-query
```

</Step>

<Step>

### Configure Wagmi

Create a configuration file to set up wagmi with the Okto connector:

```typescript
import { okto } from '@okto_web3/wagmi-adapter';
import { cookieStorage, createConfig, createStorage, http } from 'wagmi';
import { mainnet, optimism, polygon } from 'wagmi/chains';

export function getConfig() {
  return createConfig({
    chains: [polygon],
    connectors: [
      okto({
        environment: 'sandbox',
        clientPrivateKey: '0xprivatekey',
        clientSWA: '0xswa',
      }),
    ],
    storage: createStorage({
      storage: cookieStorage,
    }),
    ssr: true,
    transports: {
      [polygon.id]: http(),
    },
  });
}

declare module 'wagmi' {
  interface Register {
    config: ReturnType<typeof getConfig>;
  }
}
```

#### Okto Configuration Parameters

| Parameter | Description | Type | Required |
|-----------|-------------|------|----------|
| `environment` | Environment to use for the SDK | `'sandbox'` \| `'production'` | Yes |
| `clientPrivateKey` | Your client private key | `string` | Yes |
| `clientSWA` | Your client SWA | `string` | Yes |

</Step>

<Step>

### Set Up Providers

Update your app's root component to include the necessary providers:

```tsx
import { headers } from 'next/headers';
import type { ReactNode } from 'react';
import { cookieToInitialState } from 'wagmi';
import { getConfig } from '../wagmi';

export default async function RootLayout(props: { children: ReactNode }) {
  const initialState = cookieToInitialState(
    getConfig(),
    (await headers()).get('cookie'),
  );

  const [config] = useState(() => getConfig());
  const [queryClient] = useState(() => new QueryClient());

  return (
    <html lang="en">
      <head>
        <script src="https://accounts.google.com/gsi/client" async defer />
      </head>
      <body>
        <WagmiProvider config={config} initialState={initialState}>
          <QueryClientProvider client={queryClient}>
            {props.children}
          </QueryClientProvider>
        </WagmiProvider>
      </body>
    </html>
  );
}
```

<Callout title="Note">
Make sure to add the Google Sign-In script to your HTML head for authentication:
```html
<script src="https://accounts.google.com/gsi/client" async defer />
```
</Callout>

</Step>

<Step>

## Usage with wagmi Hooks

Once configured, you can use wagmi hooks to interact with wallets:

```typescript
import { useAccount, useConnect, useDisconnect } from 'wagmi';

function WalletConnection() {
  const { address, isConnected } = useAccount();
  const { connect, connectors } = useConnect();
  const { disconnect } = useDisconnect();

  if (isConnected) {
    return (
      <div>
        Connected to {address}
        <button onClick={() => disconnect()}>Disconnect</button>
      </div>
    );
  }

  return (
    <div>
      {connectors.map((connector) => (
        <button
          key={connector.id}
          onClick={() => connect({ connector })}
        >
          Connect with {connector.name}
        </button>
      ))}
    </div>
  );
}
```

</Step>

</Steps>
